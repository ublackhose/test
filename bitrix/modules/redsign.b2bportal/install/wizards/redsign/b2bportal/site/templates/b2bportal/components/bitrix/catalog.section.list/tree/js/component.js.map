{"version":3,"file":"component.js","sources":["../src/component.js"],"sourcesContent":["export class CSLTree\n{\n\tconstructor(params)\n\t{\n\t\t({\n\t\t\ttreeNode: this.treeNode,\n\t\t\tsearchInputNode: this.searchInputNode\n\t\t} = params);\n\n\t\tif (!this.treeNode)\n\t\t\tthrow new Error('CSLTree: tree not found');\n\n\t\tthis.init();\n\n\t\tif (this.searchInputNode)\n\t\t\tthis.initSearch();\n\t}\n\n\tinit()\n\t{\n\t\t$(this.treeNode)\n\t\t\t.jstree({\n\t\t\t\t'plugins': ['search', 'checkbox', 'types'],\n\t\t\t\t'search': {\n\t\t\t\t\t'show_only_matches': true\n\t\t\t\t},\n\t\t\t\t'types' : {\n\t\t\t\t\t'default' : {\n\t\t\t\t\t\t'icon': 'fa fa-folder kt-font-brand'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t\t.on('changed.jstree', (e, { selected }) => this.onSelectedHandle(selected));\n\t}\n\n\tinitSearch()\n\t{\n\t\t$(this.searchInputNode).on('input', ({ target }) => {\n\t\t\t$(this.treeNode).jstree('search', target.value);\n\t\t});\n\t}\n\n\tonSelectedHandle(selected)\n\t{\n\t\tconst filterCategories = selected\n\t\t\t.map(elementId => {\n\t\t\t\tconst node = document.getElementById(elementId);\n\t\t\t\treturn node ? node.getAttribute('data-section-id') : null;\n\t\t\t})\n\t\t\t.filter(sectionId => sectionId);\n\n\t\tthis.sendRequest(filterCategories);\n\t}\n\n\tasync sendRequest(filterCategories)\n\t{\n\t\tconst uri = new BX.Uri(window.location.pathname + window.location.search);\n\t\turi.setQueryParam('filter_categories', filterCategories);\n\t\tBX.onCustomEvent(`filter-arrFilter-on-submit`, [{ arrFilter_SUBSECTIONS: filterCategories }]);\n\t}\n}"],"names":["CSLTree","params","treeNode","searchInputNode","Error","init","initSearch","$","jstree","on","e","selected","onSelectedHandle","target","value","filterCategories","map","elementId","node","document","getElementById","getAttribute","filter","sectionId","sendRequest","uri","BX","Uri","window","location","pathname","search","setQueryParam","onCustomEvent","arrFilter_SUBSECTIONS"],"mappings":";;;;;;AAAA,KAAaA,OAAb;GAEC,iBAAYC,MAAZ,EACA;KAAA;KAEY,KAAKC,QAFjB,GAIKD,MAJL,CAEEC,QAFF;KAGmB,KAAKC,eAHxB,GAIKF,MAJL,CAGEE,eAHF;KAMC,IAAI,CAAC,KAAKD,QAAV,EACC,MAAM,IAAIE,KAAJ,CAAU,yBAAV,CAAN;KAED,KAAKC,IAAL;KAEA,IAAI,KAAKF,eAAT,EACC,KAAKG,UAAL;;;GAfH;KAAA;KAAA,uBAmBC;OAAA;;OACCC,CAAC,CAAC,KAAKL,QAAN,CAAD,CACEM,MADF,CACS;SACP,WAAW,CAAC,QAAD,EAAW,UAAX,EAAuB,OAAvB,CADJ;SAEP,UAAU;WACT,qBAAqB;UAHf;SAKP,SAAU;WACT,WAAY;aACX,QAAQ;;;QARZ,EAYEC,EAZF,CAYK,gBAZL,EAYuB,UAACC,CAAD;SAAA,IAAMC,QAAN,QAAMA,QAAN;SAAA,OAAqB,KAAI,CAACC,gBAAL,CAAsBD,QAAtB,CAArB;QAZvB;;;KApBF;KAAA,6BAoCC;OAAA;;OACCJ,CAAC,CAAC,KAAKJ,eAAN,CAAD,CAAwBM,EAAxB,CAA2B,OAA3B,EAAoC,iBAAgB;SAAA,IAAbI,MAAa,SAAbA,MAAa;SACnDN,CAAC,CAAC,MAAI,CAACL,QAAN,CAAD,CAAiBM,MAAjB,CAAwB,QAAxB,EAAkCK,MAAM,CAACC,KAAzC;QADD;;;KArCF;KAAA,iCA0CkBH,QA1ClB,EA2CC;OACC,IAAMI,gBAAgB,GAAGJ,QAAQ,CAC/BK,GADuB,CACnB,UAAAC,SAAS,EAAI;SACjB,IAAMC,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwBH,SAAxB,CAAb;SACA,OAAOC,IAAI,GAAGA,IAAI,CAACG,YAAL,CAAkB,iBAAlB,CAAH,GAA0C,IAArD;QAHuB,EAKvBC,MALuB,CAKhB,UAAAC,SAAS;SAAA,OAAIA,SAAJ;QALO,CAAzB;OAOA,KAAKC,WAAL,CAAiBT,gBAAjB;;;KAnDF;KAAA;OAAA,2GAsDmBA,gBAtDnB;SAAA;SAAA;WAAA;aAAA;eAAA;iBAwDQU,GAxDR,GAwDc,IAAIC,EAAE,CAACC,GAAP,CAAWC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,GAA2BF,MAAM,CAACC,QAAP,CAAgBE,MAAtD,CAxDd;iBAyDEN,GAAG,CAACO,aAAJ,CAAkB,mBAAlB,EAAuCjB,gBAAvC;iBACAW,EAAE,CAACO,aAAH,+BAA+C,CAAC;mBAAEC,qBAAqB,EAAEnB;kBAA1B,CAA/C;;eA1DF;eAAA;iBAAA;;;;;;OAAA;SAAA;;;OAAA;;;GAAA;CAAA;;;;;;;;"}