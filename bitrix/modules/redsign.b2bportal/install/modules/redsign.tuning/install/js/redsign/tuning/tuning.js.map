{"version":3,"file":"tuning.js","sources":["src/scripts/component.js"],"sourcesContent":["import {Event} from 'main.core';\n\nimport '../styles/component.scss';\n\nconst DEFAULT = {\n\tcontainerId: 'rstuning',\n\tstyleSelectId : 'rstuning_styles',\n\ttimeoutChanageStylesDelay : 250,\n\ttimeoutChanageStylesId : 0,\n};\n\n\nexport class Tuning\n{\n\tstatic instance = null;\n\tcontainer = null;\n\telements = [];\n\n\tcolorMacrosContent = '';\n\tcolorMacrosCompiled = '';\n\tmacrosList = {};\n\n\tconstructor(options = {})\n\t{\n\t\tthis.options = {...DEFAULT, ...options};\n\n\t\tdocument.addEventListener('DOMContentLoaded', this.init.bind(this));\n\n\t\tEvent.EventEmitter.subscribe('Redsign.Tuning.Component:afterResponse', ({ data }) => {\n\n\t\t\tif (data.MACROS_LIST)\n\t\t\t{\n\t\t\t\tfor (var macros in data.MACROS_LIST)\n\t\t\t\t\tthis.setMacros(macros, data.MACROS_LIST[macros]);\n\n\t\t\t\tthis.generateCss();\n\t\t\t}\n\t\t});\n\t}\n\n\tinit()\n\t{\n\t\tthis.container = document.getElementById(this.options.containerId);\n\n\t\tif (!this.container)\n\t\t\treturn;\n\n\t\tthis.elements = [...this.container.querySelectorAll('[data-macros]')];\n\n\t\tif (this.elements && this.elements.length > 0)\n\t\t{\n\t\t\tfor (let i = 0; i < this.elements.length; i++)\n\t\t\t{\n\t\t\t\tthis.setMacros(this.elements[i].getAttribute('data-macros'), this.elements[i].value);\n\n\t\t\t\tif (this.elements[i].getAttribute('data-tuning-color-macros'))\n\t\t\t\t{\n\t\t\t\t\tthis.setMacros(this.elements[i].getAttribute('data-tuning-color-macros'), this.elements[i].value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCss()\n\t{\n\t\tthis.replaceMacros();\n\t\tthis.innerStyles();\n\n\t\treturn true;\n\t}\n\n\tgetReadyMacros()\n\t{\n\t\tvar event = new CustomEvent('rs.tuning.onBeforeGetReadyMacros', {'detail' : {'macrosList': this.macrosList}});\n\t\tdocument.dispatchEvent(event);\n\n\t\treturn this.macrosList;\n\t}\n\n\tsetColorMacrosContent(content)\n\t{\n\t\tthis.colorMacrosContent = content;\n\n\t\treturn true;\n\t}\n\n\tgetColorMacrosContent()\n\t{\n\t\treturn this.colorMacrosContent;\n\t}\n\n\treplaceMacros()\n\t{\n\t\tvar content = this.getColorMacrosContent(),\n\t\t\tmacrosList = this.getReadyMacros();\n\n\t\tfor (let key1 in macrosList)\n\t\t{\n\t\t\tcontent = content.replace(new RegExp('#' + key1 + '#', 'g'), macrosList[key1]);\n\t\t}\n\n\t\tthis.setColorMacrosCompiled(content);\n\n\t\treturn true;\n\t}\n\n\tinnerStyles()\n\t{\n\t\tclearTimeout(this.options.timeoutChanageStylesId);\n\n\t\tthis.options.timeoutChanageStylesId = setTimeout(() => {\n\t\t\tdocument.getElementById(this.options.styleSelectId).innerHTML = ''\n\t\t\t\t+ '<style>' + this.getColorMacrosCompiled() + '</style>';\n\t\t}, this.options.timeoutChanageStylesDelay);\n\n\t\treturn true;\n\t}\n\n\tsetColorMacrosCompiled(content)\n\t{\n\t\tthis.colorMacrosCompiled = content;\n\n\t\treturn true;\n\t}\n\n\tgetColorMacrosCompiled()\n\t{\n\t\treturn this.colorMacrosCompiled;\n\t}\n\n\tsetMacros(macrosName, value)\n\t{\n\t\tthis.macrosList[macrosName] = value;\n\n\t\treturn true;\n\t}\n}\n"],"names":["DEFAULT","containerId","styleSelectId","timeoutChanageStylesDelay","timeoutChanageStylesId","Tuning","options","document","addEventListener","init","bind","Event","EventEmitter","subscribe","data","MACROS_LIST","macros","setMacros","generateCss","container","getElementById","elements","querySelectorAll","length","i","getAttribute","value","replaceMacros","innerStyles","event","CustomEvent","macrosList","dispatchEvent","content","colorMacrosContent","getColorMacrosContent","getReadyMacros","key1","replace","RegExp","setColorMacrosCompiled","clearTimeout","setTimeout","innerHTML","getColorMacrosCompiled","colorMacrosCompiled","macrosName"],"mappings":"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"}