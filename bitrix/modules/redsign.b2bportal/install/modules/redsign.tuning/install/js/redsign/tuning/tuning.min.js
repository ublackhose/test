!function(e,t){"use strict";function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o={containerId:"rstuning",styleSelectId:"rstuning_styles",timeoutChanageStylesDelay:250,timeoutChanageStylesId:0},s=function(){function e(){var r=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,e),babelHelpers.defineProperty(this,"container",null),babelHelpers.defineProperty(this,"elements",[]),babelHelpers.defineProperty(this,"colorMacrosContent",""),babelHelpers.defineProperty(this,"colorMacrosCompiled",""),babelHelpers.defineProperty(this,"macrosList",{}),this.options=n(n({},o),s),document.addEventListener("DOMContentLoaded",this.init.bind(this)),t.Event.EventEmitter.subscribe("Redsign.Tuning.Component:afterResponse",(function(e){var t=e.data;if(t.MACROS_LIST){for(var n in t.MACROS_LIST)r.setMacros(n,t.MACROS_LIST[n]);r.generateCss()}}))}return babelHelpers.createClass(e,[{key:"init",value:function(){if(this.container=document.getElementById(this.options.containerId),this.container&&(this.elements=babelHelpers.toConsumableArray(this.container.querySelectorAll("[data-macros]")),this.elements&&this.elements.length>0))for(var e=0;e<this.elements.length;e++)this.setMacros(this.elements[e].getAttribute("data-macros"),this.elements[e].value),this.elements[e].getAttribute("data-tuning-color-macros")&&this.setMacros(this.elements[e].getAttribute("data-tuning-color-macros"),this.elements[e].value)}},{key:"generateCss",value:function(){return this.replaceMacros(),this.innerStyles(),!0}},{key:"getReadyMacros",value:function(){var e=new CustomEvent("rs.tuning.onBeforeGetReadyMacros",{detail:{macrosList:this.macrosList}});return document.dispatchEvent(e),this.macrosList}},{key:"setColorMacrosContent",value:function(e){return this.colorMacrosContent=e,!0}},{key:"getColorMacrosContent",value:function(){return this.colorMacrosContent}},{key:"replaceMacros",value:function(){var e=this.getColorMacrosContent(),t=this.getReadyMacros();for(var r in t)e=e.replace(new RegExp("#"+r+"#","g"),t[r]);return this.setColorMacrosCompiled(e),!0}},{key:"innerStyles",value:function(){var e=this;return clearTimeout(this.options.timeoutChanageStylesId),this.options.timeoutChanageStylesId=setTimeout((function(){document.getElementById(e.options.styleSelectId).innerHTML="<style>"+e.getColorMacrosCompiled()+"</style>"}),this.options.timeoutChanageStylesDelay),!0}},{key:"setColorMacrosCompiled",value:function(e){return this.colorMacrosCompiled=e,!0}},{key:"getColorMacrosCompiled",value:function(){return this.colorMacrosCompiled}},{key:"setMacros",value:function(e,t){return this.macrosList[e]=t,!0}}]),e}();babelHelpers.defineProperty(s,"instance",null),e.Tuning=s}(this.RS=this.RS||{},BX);