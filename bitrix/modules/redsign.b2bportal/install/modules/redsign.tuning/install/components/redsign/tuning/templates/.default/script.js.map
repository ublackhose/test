{"version":3,"file":"script.js","sources":["src/scripts/component.js"],"sourcesContent":["import {Event} from 'main.core';\n\nimport '../styles/component.scss';\n\nconst DEFAULT = {\n\tcontainerId: 'rstuning',\n\tanimationDelay: 310,\n\tsidebarWidth: 415,\n\tcontentWidth: 650,\n\tselectors: {\n\t\tsidebar: '.js-rstuning__sidebar',\n\t\tcontent: '.js-rstuning__content',\n\t\tpreloader: '.js-rstuning__preloader',\n\t\topenButton: '.js-rstuning__open-button',\n\t\tcloseButton: '.js-rstuning__close-button',\n\t\tmainOverlay: '.js-rstuning__main-overlay',\n\t\tcontentOverlay: '.js-rstuning__content-overlay',\n\t\ttoggleSidebar: '.js-rstuning__toggle-sidebar',\n\t\tdefaultSettings: '.js-tuning-default-settings',\n\t},\n\tbreakpoint:  {\n\t\ttop: (415 + 650),\n\t\tlow: 320,\n\t}\n};\n\nexport class TuningComponent extends Event.EventEmitter\n{\n\tstatic instance = null;\n\tcontainer = null;\n\tmodTabs = false;\n\tkeyCode = {\n\t\tESC: 27,\n\t};\n\tswipeData = {\n\t\ttouchDown: false,\n\t\toriginalPosition: null,\n\t\tel: 2,\n\t\tresult: {},\n\t};\n\trequest = {\n\t\tdelay: 800,\n\t\ttimeoutId: 0,\n\t};\n\tisMobile = {\n\t\tAndroid: () => {\n\t\t\treturn navigator.userAgent.match(/Android/i);\n\t\t},\n\t\tBlackBerry: () => {\n\t\t\treturn navigator.userAgent.match(/BlackBerry/i);\n\t\t},\n\t\tiOS: () => {\n\t\t\treturn navigator.userAgent.match(/iPhone|iPad|iPod/i);\n\t\t},\n\t\tOpera: () => {\n\t\t\treturn navigator.userAgent.match(/Opera Mini/i);\n\t\t},\n\t\tWindows: () => {\n\t\t\treturn navigator.userAgent.match(/IEMobile/i);\n\t\t},\n\t\tany: () => {\n\t\t\treturn (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\n\t\t}\n\t};\n\n\tconstructor(options = {})\n\t{\n        super();\n\n\t\tthis.options = {...DEFAULT, ...options};\n\n\t\tdocument.addEventListener('DOMContentLoaded', this.init.bind(this));\n\t\twindow.addEventListener('resize', this.windowResize.bind(this));\n\t}\n\n\tinit()\n\t{\n\t\tthis.container = document.getElementById(this.options.containerId);\n\n\t\tif (!this.container)\n\t\t\treturn;\n\n\t\tlet elements = [],\n\t\t\ti = 0;\n\n\t\tthis.modTabs = document.querySelector('.js-rstuning.mod-tabs') ? true : false;\n\n\t\tthis.container.classList.add('rstuning__loaded');\n\n\t\tthis.setWidth();\n\n\t\tif (this.container.classList.contains('open')) {\n\t\t\tdocument.querySelector('html').classList.toggle('rstuning-enabled');\n\t\t}\n\n\t\t// main - close\\open\n\t\tthis.container.querySelector(this.options.selectors.openButton).addEventListener('click', this.closeopen.bind(this));\n\t\tthis.container.querySelector(this.options.selectors.closeButton).addEventListener('click', this.closeopen.bind(this));\n\t\tdocument.querySelector(this.options.selectors.mainOverlay).addEventListener('click', this.closeopen.bind(this));\n\n\t\t// main - close\\open by swipe\n\t\tif (!this.isMobile.iOS())\n\t\t{\n\t\t\tthis.container.addEventListener('touchstart', this.touchStart.bind(this));\n\t\t\tthis.container.addEventListener('touchend', this.touchEnd.bind(this));\n\t\t\tthis.container.addEventListener('touchmove', this.touchMove.bind(this));\n\t\t}\n\n\t\t// open sidebar\n\t\tif (this.modTabs)\n\t\t{\n\t\t\telements = this.container.querySelectorAll(this.options.selectors.toggleSidebar);\n\t\t\tif (elements && elements.length > 0)\n\t\t\t{\n\t\t\t\tfor (i = 0; i < elements.length; i++)\n\t\t\t\t{\n\t\t\t\t\telements[i].addEventListener('click', this.toggleSidebar.bind(this));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.container.querySelector(this.options.selectors.contentOverlay).addEventListener('click', this.toggleSidebar.bind(this));\n\t\t}\n\n\t\t// default settings\n\t\telements = this.container.querySelectorAll(this.options.selectors.defaultSettings);\n\t\tif (elements && elements.length > 0)\n\t\t{\n\t\t\tfor (i = 0; i < elements.length; i++)\n\t\t\t{\n\t\t\t\telements[i].addEventListener('click', this.restoreDefaultSettings.bind(this));\n\t\t\t}\n\t\t}\n\n\t\t// save macros\n\t\telements = this.container.querySelectorAll('[data-macros]');\n\t\tif (elements && elements.length > 0)\n\t\t{\n\t\t\tfor (i = 0; i < elements.length; i++)\n\t\t\t{\n\t\t\t\telements[i].addEventListener('change', this.changeMacrosFields.bind(this));\n\t\t\t}\n\t\t}\n\n\t\t// change reload status\n\t\telements = this.container.querySelectorAll('input');\n\t\tif (elements && elements.length > 0)\n\t\t{\n\t\t\tfor (i = 0; i < elements.length; i++)\n\t\t\t{\n\t\t\t\telements[i].addEventListener('change', this.changeField.bind(this));\n\t\t\t}\n\t\t}\n\t\telements = this.container.querySelectorAll('select');\n\t\tif (elements && elements.length > 0)\n\t\t{\n\t\t\tfor (i = 0; i < elements.length; i++)\n\t\t\t{\n\t\t\t\telements[i].addEventListener('change', this.changeField.bind(this));\n\t\t\t}\n\t\t}\n\t\telements = this.container.querySelectorAll('textarea');\n\t\tif (elements && elements.length > 0)\n\t\t{\n\t\t\tfor (i = 0; i < elements.length; i++)\n\t\t\t{\n\t\t\t\telements[i].addEventListener('change', this.changeField.bind(this));\n\t\t\t}\n\t\t}\n\n\t\t// tabs\n\t\telements = this.container.querySelectorAll('.js-rstuning-nav');\n\t\tif (elements && elements.length > 0)\n\t\t{\n\t\t\tfor (i = 0; i < elements.length; i++)\n\t\t\t{\n\t\t\t\telements[i].addEventListener('click', this.switchTab.bind(this));\n\t\t\t}\n\t\t}\n\n\t\t// form submit\n\t\tif (this.container.querySelector('form'))\n\t\t{\n\t\t\tthis.container.querySelector('form').addEventListener('submit', this.formSubmit.bind(this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.warn('No form detected! Cant save settings.');\n\t\t}\n\n\t\t// scroll\n\t\telements = this.container.querySelectorAll('.rstuning__scroll');\n\t\tif (elements && elements.length > 0)\n\t\t{\n\t\t\tfor (i = 0; i < elements.length; i++)\n\t\t\t{\n\t\t\t\telements[i].addEventListener('wheel', (event) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\n\twindowResize()\n\t{\n\t\tthis.setWidth();\n\n\t\treturn true;\n\t}\n\n\tcloseopen(e)\n\t{\n\t\tconst goOpen = (this.container.classList.contains('open') ? false : true);\n\n\t\t// main\n\t\tdocument.querySelector('html').classList.toggle('rstuning-enabled');\n\n\t\tif (goOpen)\n\t\t{\n\t\t\tBX.setCookie('RSTUNING_COOKIE_OPEN', 'Y');\n\t\t\tthis.container.classList.remove('closed');\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.container.classList.add('open');\n\t\t\t\twindow.addEventListener('keyup', this.windowKeyUp.bind(this));\n\t\t\t}, 10);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.setCookie('RSTUNING_COOKIE_OPEN', 'N');\n\t\t\tthis.container.classList.remove('open');\n\t\t\tthis.container.classList.remove('loading');\n\t\t\tthis.container.classList.remove('open-sidebar');\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.container.classList.add('closed');\n\n\t\t\t\twindow.removeEventListener('keyup', this.windowKeyUp.bind(this));\n\t\t\t}, this.options.animationDelay);\n\t\t}\n\n\t\t// sidebar\n\t\tif (this.modTabs)\n\t\t{\n\t\t\tthis.container.classList.remove('open-sidebar');\n\t\t\tthis.container.querySelector(this.options.selectors.contentOverlay).classList.remove('open');\n\t\t}\n\n\t\tthis.setWidth();\n\n\t\tif (!!e)\n\t\t\te.preventDefault();\n\n\t\treturn true;\n\t}\n\n\twindowKeyUp(e)\n\t{\n\t\tif (e.keyCode == this.keyCode.ESC)\n\t\t{\n\t\t\tthis.closeopen();\n\t\t}\n\t}\n\n\ttoggleSidebar()\n\t{\n\t\tif (!this.modTabs)\n\t\t\treturn false;\n\n\t\tthis.container.classList.toggle('open-sidebar');\n\t\tthis.container.querySelector(this.options.selectors.contentOverlay).classList.toggle('open');\n\n\t\treturn true;\n\t}\n\n\tchangeMacrosFields(e)\n\t{\n\t\tconst { rsTuning } = window;\n\n\t\trsTuning.setMacros(e.target.getAttribute('data-macros'), e.target.value);\n\t\tif (e.target.getAttribute('data-tuning-color-macros'))\n\t\t{\n\t\t\trsTuning.setMacros(e.target.getAttribute('data-tuning-color-macros'), e.target.value);\n\t\t}\n\n\t\trsTuning.generateCss();\n\n\t\treturn true;\n\t}\n\n\tchangeField(e)\n\t{\n\t\tlet el = e.target;\n\n\t\twhile ((el = el.parentElement) && !el.classList.contains('js-rs_option_info'));\n\n\t\tif (el && el.getAttribute('data-reload') == 'Y')\n\t\t{\n\t\t\tthis.container.setAttribute('data-reload', 'Y');\n\t\t}\n\n\t\tthis.formSubmit();\n\n\t\treturn true;\n\t}\n\n\tswitchTab(e)\n\t{\n\t\tlet link = e.currentTarget,\n\t\t\ttabId = link.getAttribute('data-tabid'),\n\t\t\ttab = this.container.querySelector('.js-rstuning__tab-content [data-tabid=\"' + tabId + '\"]'),\n\t\t\tel = false,\n\t\t\telements = [],\n\t\t\ti = 0;\n\n\t\tif (!tab || !tabId)\n\t\t\treturn;\n\n\t\tBX.onCustomEvent(window, 'rs.tuning.tabs.before.change', [tab]);\n\n\t\tif (this.container.querySelector('.js-content-title') > 0)\n\t\t\tthis.container.querySelector('.js-content-title').innerHTML = link.getAttribute('data-name');\n\n\t\tel = link;\n\t\twhile ((el = el.parentElement) && !el.classList.contains('js-rstuning__tab-switcher'));\n\t\tif (el)\n\t\t{\n\t\t\telements = el.querySelectorAll('a');\n\t\t\tif (elements && elements.length > 0)\n\t\t\t{\n\t\t\t\tfor (i = 0; i < elements.length; i++)\n\t\t\t\t{\n\t\t\t\t\telements[i].classList.remove('active');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlink.classList.add('active');\n\n\t\tel = tab;\n\t\twhile ((el = el.parentElement) && !el.classList.contains('js-rstuning__tab-content'));\n\t\tif (el)\n\t\t{\n\t\t\telements = el.querySelectorAll('.js-rstuning__tab-pane');\n\t\t\tif (elements && elements.length > 0)\n\t\t\t{\n\t\t\t\tfor (i = 0; i < elements.length; i++)\n\t\t\t\t{\n\t\t\t\t\telements[i].classList.remove('active');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\ttab.classList.add('active');\n\n\t\tBX.setCookie('RSTUNING_COOKIE_TAB_ACTIVE', tabId);\n\n\t\tthis.container.classList.remove('open-sidebar');\n\t\tdocument.querySelector(this.options.selectors.contentOverlay).classList.remove('open');\n\n\t\tBX.onCustomEvent(window, 'rs.tuning.tabs.after.change', [tab]);\n\n\t\treturn true;\n\t}\n\n\tformSubmit()\n\t{\n\t\tconst form = this.container.querySelector('form'),\n\t\t\txhr = new XMLHttpRequest(),\n\t\t\tdata = new FormData(form);\n\n\t\tclearTimeout(this.request.timeoutId);\n\t\tthis.request.timeoutId = setTimeout(() => {\n\t\t\tthis.loading();\n\n\t\t\txhr.open('POST', form.getAttribute('action'), false);\n\t\t\txhr.addEventListener('load', this.requestCallback.bind(this));\n\t\t\txhr.send(data);\n\n\t\t}, this.request.delay);\n\n\t\treturn true;\n\t}\n\n\trequestCallback(e)\n\t{\n\t\tif (e.currentTarget.status != 200)\n\t\t{\n\t\t\tconsole.error(e.currentTarget.status + ': ' + e.currentTarget.statusText);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.container.getAttribute('data-reload') == 'Y')\n\t\t\t{\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst response = JSON.parse(e.currentTarget.response);\n\t\t\t\tthis.emit('Redsign.Tuning.Component:afterResponse', response);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.loading();\n\t\t\t\t}, 1500);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\trestoreDefaultSettings(e)\n\t{\n\t\tconst form = this.container.querySelector('form'),\n\t\t\txhr = new XMLHttpRequest(),\n\t\t\tpostQuery = \"site_id=\" + this.container.getAttribute('data-siteid') + \"&rstuning_ajax=Y&rstuning_action=restoredefaultsettings\";\n\n\t\tthis.container.setAttribute('data-reload', 'Y');\n\n\t\tthis.loading();\n\n\t\txhr.open('POST', form.getAttribute('action'), true);\n\t\txhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\t\txhr.addEventListener('load', this.requestCallback.bind(this));\n\t\txhr.send(postQuery);\n\n\t\treturn true;\n\t}\n\n\tswipe(e)\n\t{\n\t\tvar x = 0,\n\t\t\ty = 0,\n\t\t\tdx, dy;\n\n\t\tif (e && e.touches[0]) {\n\t\t\tx = e.touches[0].pageX;\n\t\t\ty = e.touches[0].pageY;\n\t\t} else if (e && e.originalEvent && e.originalEvent.touches[0]) {\n\t\t\tx = e.originalEvent.touches[0].pageX;\n\t\t\ty = e.originalEvent.touches[0].pageY;\n\t\t} else if (e && e.changedTouches[0]) {\n\t\t\tx = e.changedTouches[0].pageX;\n\t\t\ty = e.changedTouches[0].pageY;\n\t\t} else {\n\t\t\tconsole.warn('TuningComponent: swipe - no coordinates');\n\t\t}\n\n\t\tif (Math.abs(this.swipeData.originalPosition.x - x) > 80) {\n\t\t\tdx = (x > this.swipeData.originalPosition.x) ? 'right' : 'left';\n\t\t}\n\t\telse {\n\t\t\tdx = null;\n\t\t}\n\n\t\tif (Math.abs(this.swipeData.originalPosition.y - y) > 80) {\n\t\t\tdy = (y > this.swipeData.originalPosition.y) ? 'down' : 'up';\n\t\t} else {\n\t\t\tdy = null;\n\t\t}\n\n\t\tthis.swipeData.result = {\n\t\t\tdirection: {\n\t\t\t\tx: dx,\n\t\t\t\ty: dy\n\t\t\t},\n\t\t\toffset: {\n\t\t\t\tx: x - this.swipeData.originalPosition.x,\n\t\t\t\ty: this.swipeData.originalPosition.y - y\n\t\t\t}\n\t\t};\n\n\t\treturn true;\n\t}\n\n\ttouchStart(e)\n\t{\n\t\tthis.swipeData.touchDown = true;\n\t\tif (e && e.touches[0]) {\n\t\t\tthis.swipeData.originalPosition = {\n\t\t\t\tx: e.touches[0].pageX,\n\t\t\t\ty: e.touches[0].pageY\n\t\t\t};\n\t\t} else if (e && e.originalEvent && e.originalEvent.touches[0]) {\n\t\t\tthis.swipeData.originalPosition = {\n\t\t\t\tx: e.originalEvent.touches[0].pageX,\n\t\t\t\ty: e.originalEvent.touches[0].pageY\n\t\t\t};\n\t\t} else if (e && e.changedTouches[0]) {\n\t\t\tthis.swipeData.originalPosition = {\n\t\t\t\tx: e.changedTouches[0].pageX,\n\t\t\t\ty: e.changedTouches[0].pageY\n\t\t\t};\n\t\t} else {\n\t\t\tconsole.error('TuningComponent: touch coordinates get error.');\n\t\t}\n\n\t\treturn true;\n\t}\n\n\ttouchEnd(e)\n\t{\n\t\tthis.swipe(e);\n\n\t\tthis.swipeData.touchDown = false;\n\t\tthis.swipeData.originalPosition = null;\n\n\t\tif (this.swipeData.result.direction.x == 'right' && this.container.classList.contains('open')) {\n\t\t\tthis.toggleSidebar();\n\t\t} else if (this.swipeData.result.direction.x == 'left' && this.container.classList.contains('open-sidebar')) {\n\t\t\tthis.toggleSidebar();\n\t\t} else if (this.swipeData.result.direction.x == 'left' && !this.container.classList.contains('open-sidebar')) {\n\t\t\tthis.closeopen();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\ttouchMove(e)\n\t{\n\t\tif (!this.swipeData.touchDown) { return; }\n\t}\n\n\tsetWidth()\n\t{\n\t\tif (window.innerWidth <= this.options.breakpoint.top)\n\t\t{\n\t\t\tthis.container.querySelector(this.options.selectors.preloader).style.width =\n\t\t\t\tMath.min((this.options.sidebarWidth + this.options.contentWidth), window.innerWidth) + 'px';\n\t\t\t\tthis.container.querySelector(this.options.selectors.sidebar).style.width =\n\t\t\t\tMath.min(this.options.sidebarWidth, window.innerWidth) + 'px';\n\t\t\t\tthis.container.querySelector(this.options.selectors.content).style.width =\n\t\t\t\tMath.min(this.options.contentWidth, window.innerWidth) + 'px';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.container.querySelector(this.options.selectors.sidebar).style.width = '';\n\t\t\tthis.container.querySelector(this.options.selectors.content).style.width = '';\n\t\t}\n\n\t\t// sidebar\n\t\tif (this.modTabs)\n\t\t{\n\t\t\tthis.container.classList.remove('open-sidebar');\n\t\t\tthis.container.querySelector(this.options.selectors.contentOverlay).classList.remove('open');\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tloading()\n\t{\n\t\tif (this.container.getAttribute('data-reload') == 'Y')\n\t\t{\n\t\t\tthis.container.classList.toggle('loading');\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetTuningComponent()\n\t{\n\t\treturn this.container;\n\t}\n}\n"],"names":["DEFAULT","containerId","animationDelay","sidebarWidth","contentWidth","selectors","sidebar","content","preloader","openButton","closeButton","mainOverlay","contentOverlay","toggleSidebar","defaultSettings","breakpoint","top","low","TuningComponent","options","ESC","touchDown","originalPosition","el","result","delay","timeoutId","Android","navigator","userAgent","match","BlackBerry","iOS","Opera","Windows","any","isMobile","document","addEventListener","init","bind","window","windowResize","container","getElementById","elements","i","modTabs","querySelector","classList","add","setWidth","contains","toggle","closeopen","touchStart","touchEnd","touchMove","querySelectorAll","length","restoreDefaultSettings","changeMacrosFields","changeField","switchTab","formSubmit","console","warn","event","stopPropagation","e","goOpen","BX","setCookie","remove","setTimeout","windowKeyUp","removeEventListener","preventDefault","keyCode","rsTuning","setMacros","target","getAttribute","value","generateCss","parentElement","setAttribute","link","currentTarget","tabId","tab","onCustomEvent","innerHTML","form","xhr","XMLHttpRequest","data","FormData","clearTimeout","request","loading","open","requestCallback","send","status","error","statusText","location","reload","response","JSON","parse","emit","postQuery","setRequestHeader","x","y","dx","dy","touches","pageX","pageY","originalEvent","changedTouches","Math","abs","swipeData","direction","offset","swipe","innerWidth","style","width","min","Event","EventEmitter"],"mappings":"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"}