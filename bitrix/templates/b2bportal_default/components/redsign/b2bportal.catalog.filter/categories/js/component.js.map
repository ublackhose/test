{"version":3,"file":"component.js","sources":["../src/component.js"],"sourcesContent":["export class CSLTree \n{\n\tconstructor(params)\n\t{\n\t\t({ \n\t\t\ttreeNode: this.treeNode,\n\t\t\tsearchInputNode: this.searchInputNode\n\t\t} = params);\n\n\t\tif (!this.treeNode)\n\t\t\tthrow new Error('CSLTree: tree not found');\n\n\t\tthis.init();\n\n\t\tif (this.searchInputNode)\n\t\t\tthis.initSearch();\n\t}\n\n\tinit()\n\t{\n\t\tconst onChangedHandle = BX.debounce((e, { selected }) => {\n\t\t\tthis.onSelectedHandle(selected); \n\t\t}, 1000);\n\n\t\t$(this.treeNode)\n\t\t\t.jstree({\n\t\t\t\t'plugins': ['search', 'checkbox', 'types'],\n\t\t\t\t'search': {\n\t\t\t\t\t'show_only_matches': true,\n\t\t\t\t},\n\t\t\t\t'types' : {\n\t\t\t\t\t'default' : {\n\t\t\t\t\t\t'icon': 'fa fa-folder kt-font-brand'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}) \n\t\t\t.on('ready.jstree', () => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t$(this.treeNode).on('changed.jstree', onChangedHandle);\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tinitSearch()\n\t{\n\t\t$(this.searchInputNode).on('input', ({ target }) => {\n\t\t\t$(this.treeNode).jstree('search', target.value);\n\t\t});\n\t}\n\n\tonSelectedHandle(selected)\n\t{\n\t\tconst filterCategories = selected\n\t\t\t.map(elementId => {\n\t\t\t\tconst node = document.getElementById(elementId);\n\t\t\t\treturn node ? node.getAttribute('data-section-id') : null;\n\t\t\t})\n\t\t\t.filter(sectionId => sectionId);\n\n\t\tthis.sendRequest(filterCategories);\n\t}\n\n\tasync sendRequest(filterCategories)\n\t{\n\t\tconst uri = new BX.Uri(window.location.pathname + window.location.search);\n\t\turi.setQueryParam('filter_categories', filterCategories);\n\n\t\tBX.onCustomEvent(\n\t\t\t`filter-arrFilter-on-submit`, \n\t\t\t[\n\t\t\t\t{ \n\t\t\t\t\tarrFilter_SUBSECTIONS: filterCategories \n\t\t\t\t}\n\t\t\t]\n\t\t);\n\t}\n}"],"names":["CSLTree","params","treeNode","searchInputNode","Error","init","initSearch","onChangedHandle","BX","debounce","e","selected","onSelectedHandle","$","jstree","on","setTimeout","target","value","filterCategories","map","elementId","node","document","getElementById","getAttribute","filter","sectionId","sendRequest","uri","Uri","window","location","pathname","search","setQueryParam","onCustomEvent","arrFilter_SUBSECTIONS"],"mappings":";;;;;;AAAA,KAAaA,OAAO;GAEnB,iBAAYC,MAAM,EAClB;KAAA;KAEY,IAAI,CAACC,QAAQ,GAEpBD,MAAM,CAFTC,QAAQ;KACS,IAAI,CAACC,eAAe,GAClCF,MAAM,CADTE,eAAe;KAGhB,IAAI,CAAC,IAAI,CAACD,QAAQ,EACjB,MAAM,IAAIE,KAAK,CAAC,yBAAyB,CAAC;KAE3C,IAAI,CAACC,IAAI,EAAE;KAEX,IAAI,IAAI,CAACF,eAAe,EACvB,IAAI,CAACG,UAAU,EAAE;;GAClB;KAAA;KAAA,uBAGD;OAAA;OACC,IAAMC,eAAe,GAAGC,EAAE,CAACC,QAAQ,CAAC,UAACC,CAAC,QAAmB;SAAA,IAAfC,QAAQ,QAARA,QAAQ;SACjD,KAAI,CAACC,gBAAgB,CAACD,QAAQ,CAAC;QAC/B,EAAE,IAAI,CAAC;OAERE,CAAC,CAAC,IAAI,CAACX,QAAQ,CAAC,CACdY,MAAM,CAAC;SACP,SAAS,EAAE,CAAC,QAAQ,EAAE,UAAU,EAAE,OAAO,CAAC;SAC1C,QAAQ,EAAE;WACT,mBAAmB,EAAE;UACrB;SACD,OAAO,EAAG;WACT,SAAS,EAAG;aACX,MAAM,EAAE;;;QAGV,CAAC,CACDC,EAAE,CAAC,cAAc,EAAE,YAAM;SACzBC,UAAU,CAAC,YAAM;WAChBH,CAAC,CAAC,KAAI,CAACX,QAAQ,CAAC,CAACa,EAAE,CAAC,gBAAgB,EAAER,eAAe,CAAC;UACtD,CAAC;QACF,CAAC;;;KACH;KAAA,6BAGD;OAAA;OACCM,CAAC,CAAC,IAAI,CAACV,eAAe,CAAC,CAACY,EAAE,CAAC,OAAO,EAAE,iBAAgB;SAAA,IAAbE,MAAM,SAANA,MAAM;SAC5CJ,CAAC,CAAC,MAAI,CAACX,QAAQ,CAAC,CAACY,MAAM,CAAC,QAAQ,EAAEG,MAAM,CAACC,KAAK,CAAC;QAC/C,CAAC;;;KACF;KAAA,iCAEgBP,QAAQ,EACzB;OACC,IAAMQ,gBAAgB,GAAGR,QAAQ,CAC/BS,GAAG,CAAC,UAAAC,SAAS,EAAI;SACjB,IAAMC,IAAI,GAAGC,QAAQ,CAACC,cAAc,CAACH,SAAS,CAAC;SAC/C,OAAOC,IAAI,GAAGA,IAAI,CAACG,YAAY,CAAC,iBAAiB,CAAC,GAAG,IAAI;QACzD,CAAC,CACDC,MAAM,CAAC,UAAAC,SAAS;SAAA,OAAIA,SAAS;SAAC;OAEhC,IAAI,CAACC,WAAW,CAACT,gBAAgB,CAAC;;;KAClC;KAAA;OAAA,2GAEiBA,gBAAgB;SAAA;SAAA;WAAA;aAAA;eAE3BU,GAAG,GAAG,IAAIrB,EAAE,CAACsB,GAAG,CAACC,MAAM,CAACC,QAAQ,CAACC,QAAQ,GAAGF,MAAM,CAACC,QAAQ,CAACE,MAAM,CAAC;eACzEL,GAAG,CAACM,aAAa,CAAC,mBAAmB,EAAEhB,gBAAgB,CAAC;eAExDX,EAAE,CAAC4B,aAAa,+BAEf,CACC;iBACCC,qBAAqB,EAAElB;gBACvB,CACD,CACD;aAAC;aAAA;eAAA;;;;OAAA;SAAA;;OAAA;;;GAAA;CAAA;;;;;;;;"}