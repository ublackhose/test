{"version":3,"file":"CodesImport.js","sources":["../src/api.js","../../../../../../../../node_modules/lodash/_basePropertyOf.js","../../../../../../../../node_modules/lodash/_escapeHtmlChar.js","../../../../../../../../node_modules/lodash/_freeGlobal.js","../../../../../../../../node_modules/lodash/_root.js","../../../../../../../../node_modules/lodash/_Symbol.js","../../../../../../../../node_modules/lodash/_arrayMap.js","../../../../../../../../node_modules/lodash/isArray.js","../../../../../../../../node_modules/lodash/_getRawTag.js","../../../../../../../../node_modules/lodash/_objectToString.js","../../../../../../../../node_modules/lodash/_baseGetTag.js","../../../../../../../../node_modules/lodash/isObjectLike.js","../../../../../../../../node_modules/lodash/isSymbol.js","../../../../../../../../node_modules/lodash/_baseToString.js","../../../../../../../../node_modules/lodash/toString.js","../../../../../../../../node_modules/lodash/escape.js","../src/CodesImport.vue?rollup-plugin-vue=script.js","../../../../../../../../node_modules/vue-runtime-helpers/dist/normalize-component.js","../../../../../../../../node_modules/vue-runtime-helpers/dist/inject-style/browser.js","../src/CodesImport.vue","../src/CodesImport.js"],"sourcesContent":["export async function action(actionName, data)\r\n{\r\n\tvar resultData = undefined;\r\n\r\n\ttry\r\n\t{\r\n\t\tconst result = await new Promise((resolve, reject) => {\r\n\t\t\tBX.ajax.runComponentAction(\r\n\t\t\t\t'redsign:b2bportal.basket.imports',\r\n\t\t\t\tactionName,\r\n\t\t\t\t{ \r\n\t\t\t\t\tmode: 'class',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t}\r\n\t\t\t).then(resolve, reject);\r\n\t\t});\r\n\r\n\t\tresultData = result.data;\r\n\t}\r\n\tcatch (e)\r\n\t{\r\n\t\tglobal.toastr.error(((e.errors || [])[0] || {}).message);\r\n\t\tthrow e;\r\n\t}\r\n\r\n\treturn resultData;\r\n};\r\n\r\nexport async function checkExistsCodes(data)\r\n{\r\n\treturn action('check', data);\r\n}\r\n\r\nexport async function addtobasket(data)\r\n{\r\n\treturn action('addtobasket', data)\r\n\t\t.then((result) => {\r\n\t\t\tBX.onCustomEvent('updateBasketComponent');\r\n\r\n\t\t\treturn result;\r\n\t\t});\r\n}\r\n\r\n\r\nexport async function parseFile(data)\r\n{\r\n\treturn action('parseFile', data);\r\n}","/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = basePropertyOf;\n","var basePropertyOf = require('./_basePropertyOf');\n\n/** Used to map characters to HTML entities. */\nvar htmlEscapes = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\n\n/**\n * Used by `_.escape` to convert characters to HTML entities.\n *\n * @private\n * @param {string} chr The matched character to escape.\n * @returns {string} Returns the escaped character.\n */\nvar escapeHtmlChar = basePropertyOf(htmlEscapes);\n\nmodule.exports = escapeHtmlChar;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var escapeHtmlChar = require('./_escapeHtmlChar'),\n    toString = require('./toString');\n\n/** Used to match HTML entities and HTML characters. */\nvar reUnescapedHtml = /[&<>\"']/g,\n    reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n/**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n *\n * **Note:** No other characters are escaped. To escape additional\n * characters use a third-party library like [_he_](https://mths.be/he).\n *\n * Though the \">\" character is escaped for symmetry, characters like\n * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n * unless they're part of a tag or unquoted attribute value. See\n * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n * (under \"semi-related fun fact\") for more details.\n *\n * When working with HTML you should always\n * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n * XSS vectors.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escape('fred, barney, & pebbles');\n * // => 'fred, barney, &amp; pebbles'\n */\nfunction escape(string) {\n  string = toString(string);\n  return (string && reHasUnescapedHtml.test(string))\n    ? string.replace(reUnescapedHtml, escapeHtmlChar)\n    : string;\n}\n\nmodule.exports = escape;\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { checkExistsCodes, addtobasket } from './api.js';\r\nimport _escape from 'lodash/escape'; \r\n\r\nconst DEFAULT_ADDTOBASKET_QUANTITY = 1;\r\n\r\nexport default {\r\n\tprops: {\r\n\t\tsignedParameters: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t}\r\n\t},\r\n\r\n\tdata()\r\n\t{\r\n\t\treturn {\r\n\t\t\tcontent: '',\r\n\t\t\tdisplayContent: '',\r\n\t\t\tcheckedCodes: {}\r\n\t\t};\r\n\t},\r\n\r\n\tcomputed: {\r\n\r\n\t\tmessages()\r\n\t\t{\r\n\t\t\treturn (\r\n\t\t\t\tObject.freeze(\r\n\t\t\t\t\tObject.keys(BX.message).filter(message => message.startsWith('RS_B2BPORTAL_BI'))\r\n\t\t\t\t\t\t.reduce((obj, message) => { obj[message.slice(message)] = BX.message(message); return obj; }, {})\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tcodes()\r\n\t\t{\r\n\t\t\treturn this.content\r\n\t\t\t\t.split('\\n')\r\n\t\t\t\t.map(codeValue => codeValue.trim())\r\n\t\t\t\t.filter(codeValue =>  codeValue !== '');\r\n\t\t},\r\n\r\n\t},\r\n\r\n\tmounted()\r\n\t{\r\n\t\tthis.$refs.editor.addEventListener(\"paste\", function(e) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tvar text = '';\r\n\r\n\t\t\tif (typeof (e.originalEvent || e).clipboardData === 'undefined')\r\n\t\t\t{\r\n\t\t\t\ttext = window.clipboardData.getData('Text');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\ttext = (e.originalEvent || e).clipboardData.getData('text/plain');\r\n\t\t\t}\r\n\r\n\t\t\tif (document.queryCommandSupported('insertHTML'))\r\n\t\t\t{\r\n\t\t\t\ttext = text.replace(/\\r?\\n/g, '<br>');\r\n\t\t\t\tdocument.execCommand(\"insertHTML\", false, text);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdocument.execCommand(\"paste\", false, text);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$refs.editor.addEventListener('input', e => {\r\n\r\n\t\t\tif (e.target.textContent) \r\n\t\t\t{\r\n\t\t\t\te.target.dataset.divPlaceholderContent = 'true';\r\n\t\t\t}\r\n\t\t\telse \r\n\t\t\t{\r\n\t\t\t\tdelete(e.target.dataset.divPlaceholderContent);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\r\n\tmethods: {\r\n\r\n\t\thandleInput(e)\r\n\t\t{\r\n\t\t\tconst selection = document.getSelection();\r\n\t\t\tconst selNode = selection.anchorNode;\r\n\t\r\n\t\t\tif (selNode.nodeType == Node.TEXT_NODE && selNode.parentNode.tagName != 'CODE')\r\n\t\t\t{\r\n\t\t\t\tselNode.parentNode.setAttribute('class', '');\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.content = e.target.innerText;\r\n\t\t},\r\n\r\n\t\thandleBlur(e)\r\n\t\t{\r\n\t\t\tthis.check();\r\n\t\t},\r\n\r\n\t\tasync check()\r\n\t\t{\r\n\t\t\tconst newCodes = this.codes.filter(code => !this.checkedCodes.hasOwnProperty(code));\r\n\r\n\t\t\tif (newCodes.length > 0)\r\n\t\t\t{\r\n\t\t\t\tconst foundCodes = await checkExistsCodes({\r\n\t\t\t\t\tcodes: newCodes,\r\n\t\t\t\t\tsignedParameters: this.signedParameters\r\n\t\t\t\t});\r\n\r\n\t\t\t\tnewCodes.forEach((codeValue) => {\r\n\t\t\t\t\tthis.checkedCodes[codeValue] = foundCodes.includes(codeValue);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.updateDisplayContent();\r\n\t\t},\r\n\r\n\t\tupdateDisplayContent()\r\n\t\t{\r\n\t\t\tlet html = '';\r\n\r\n\t\t\tfor(let code of this.codes) \r\n\t\t\t{\r\n\t\t\t\tconst isFound = !!this.checkedCodes[code];\r\n\t\t\t\thtml += '<div class=\"' + (isFound ? 'text-success': 'text-danger') + '\">' + _escape(code) + ' ' + '</div>'\r\n\t\t\t}\r\n\r\n\t\t\tthis.displayContent = html;\r\n\t\t},\r\n\r\n\t\tremoveCodeFromContent(code)\r\n\t\t{\r\n\t\t\tthis.content = this.content\r\n\t\t\t\t.replace(new RegExp('^.*' + code + '.*$', 'mg'), '')\r\n\t\t\t\t.replace('\\n\\r?', '');\r\n\t\t},\r\n\r\n\t\tprepareData()\r\n\t\t{\r\n\t\t\tconst data = {};\r\n\r\n\t\t\tfor (let code of this.codes)\r\n\t\t\t{\r\n\t\t\t\tdata[code] = DEFAULT_ADDTOBASKET_QUANTITY;\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\tasync addtobasket()\r\n\t\t{\r\n\t\t\tif (!this.codes.length)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tKTApp.block(document.querySelector('.modal.show'));\r\n\r\n\t\t\tconst result = await addtobasket({\r\n\t\t\t\tdata: this.prepareData(),\r\n\t\t\t\tsignedParameters: this.signedParameters\r\n\t\t\t});\r\n\r\n\t\t\tfor (let i in result)\r\n\t\t\t{\r\n\t\t\t\tif (!result.hasOwnProperty(i))\r\n\t\t\t\t{\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (result[i].isSuccess)\r\n\t\t\t\t{\r\n\t\t\t\t\ttoastr.success(`${i}: ${result[i].message}`);\r\n\t\t\t\t\tthis.removeCodeFromContent(result[i].code);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\twindow.toastr.error(`${i}: ${result[i].message}`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tKTApp.unblock(document.querySelector('.modal.show'));\r\n\t\t\tthis.updateDisplayContent();\r\n\t\t\tthis.$store.dispatch('cart/fetch');\r\n\t\t}\r\n\t}\r\n} \r\n","'use strict';\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier\n/* server only */\n, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n  if (typeof shadowMode !== 'boolean') {\n    createInjectorSSR = createInjector;\n    createInjector = shadowMode;\n    shadowMode = false;\n  } // Vue.extend constructor export interop.\n\n\n  var options = typeof script === 'function' ? script.options : script; // render functions\n\n  if (template && template.render) {\n    options.render = template.render;\n    options.staticRenderFns = template.staticRenderFns;\n    options._compiled = true; // functional template\n\n    if (isFunctionalTemplate) {\n      options.functional = true;\n    }\n  } // scopedId\n\n\n  if (scopeId) {\n    options._scopeId = scopeId;\n  }\n\n  var hook;\n\n  if (moduleIdentifier) {\n    // server build\n    hook = function hook(context) {\n      // 2.3 injection\n      context = context || // cached call\n      this.$vnode && this.$vnode.ssrContext || // stateful\n      this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional\n      // 2.2 with runInNewContext: true\n\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__;\n      } // inject component styles\n\n\n      if (style) {\n        style.call(this, createInjectorSSR(context));\n      } // register component module identifier for async chunk inference\n\n\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier);\n      }\n    }; // used by ssr in case component is cached and beforeCreate\n    // never gets called\n\n\n    options._ssrRegister = hook;\n  } else if (style) {\n    hook = shadowMode ? function () {\n      style.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n    } : function (context) {\n      style.call(this, createInjector(context));\n    };\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // register for functional component in vue file\n      var originalRender = options.render;\n\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context);\n        return originalRender(h, context);\n      };\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate;\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n    }\n  }\n\n  return script;\n}\n\nmodule.exports = normalizeComponent;\n//# sourceMappingURL=normalize-component.js.map\n","'use strict';\n\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\nfunction createInjector(context) {\n  return function (id, style) {\n    return addStyle(id, style);\n  };\n}\nvar HEAD;\nvar styles = {};\n\nfunction addStyle(id, css) {\n  var group = isOldIE ? css.media || 'default' : id;\n  var style = styles[group] || (styles[group] = {\n    ids: new Set(),\n    styles: []\n  });\n\n  if (!style.ids.has(id)) {\n    style.ids.add(id);\n    var code = css.source;\n\n    if (css.map) {\n      // https://developer.chrome.com/devtools/docs/javascript-debugging\n      // this makes source maps inside style tags work properly in Chrome\n      code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'; // http://stackoverflow.com/a/26603875\n\n      code += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';\n    }\n\n    if (!style.element) {\n      style.element = document.createElement('style');\n      style.element.type = 'text/css';\n      if (css.media) style.element.setAttribute('media', css.media);\n\n      if (HEAD === undefined) {\n        HEAD = document.head || document.getElementsByTagName('head')[0];\n      }\n\n      HEAD.appendChild(style.element);\n    }\n\n    if ('styleSheet' in style.element) {\n      style.styles.push(code);\n      style.element.styleSheet.cssText = style.styles.filter(Boolean).join('\\n');\n    } else {\n      var index = style.ids.size - 1;\n      var textNode = document.createTextNode(code);\n      var nodes = style.element.childNodes;\n      if (nodes[index]) style.element.removeChild(nodes[index]);\n      if (nodes.length) style.element.insertBefore(textNode, nodes[index]);else style.element.appendChild(textNode);\n    }\n  }\n}\n\nmodule.exports = createInjector;\n//# sourceMappingURL=browser.js.map\n","<template>\r\n\t<div>\r\n\t\t<code \r\n\t\t\tref=\"editor\"\r\n\t\t\tcontenteditable=\"true\" \r\n\t\t\tclass=\"form-control\" \r\n\t\t\tstyle=\"min-height: 200px;overflow: auto;\"\r\n\t\t\t:data-placeholder=\"messages.RS_B2BPORTAL_BI_CATALOG_PLACEHOLDER\"\r\n\t\t\t@input=\"handleInput\"\r\n\t\t\t@blur=\"handleBlur\"\r\n\t\t\tv-html=\"displayContent\"\r\n\t\t>\r\n\t\t</code>\r\n\r\n\t\t<div class=\"mt-4 pull-right\">\r\n\t\t\t<button type=\"button\" class=\"btn btn-outline-brand\" data-dismiss=\"modal\">{{ messages.RS_B2BPORTAL_BI_MODAL_CANCEL }}</button>\r\n\t\t\t<button type=\"button\" class=\"btn btn-primary\" @click=\"addtobasket\">{{ messages.RS_B2BPORTAL_BI_MODAL_IMPORT }} </button>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { checkExistsCodes, addtobasket } from './api.js';\r\nimport _escape from 'lodash/escape'; \r\n\r\nconst DEFAULT_ADDTOBASKET_QUANTITY = 1;\r\n\r\nexport default {\r\n\tprops: {\r\n\t\tsignedParameters: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t}\r\n\t},\r\n\r\n\tdata()\r\n\t{\r\n\t\treturn {\r\n\t\t\tcontent: '',\r\n\t\t\tdisplayContent: '',\r\n\t\t\tcheckedCodes: {}\r\n\t\t};\r\n\t},\r\n\r\n\tcomputed: {\r\n\r\n\t\tmessages()\r\n\t\t{\r\n\t\t\treturn (\r\n\t\t\t\tObject.freeze(\r\n\t\t\t\t\tObject.keys(BX.message).filter(message => message.startsWith('RS_B2BPORTAL_BI'))\r\n\t\t\t\t\t\t.reduce((obj, message) => { obj[message.slice(message)] = BX.message(message); return obj; }, {})\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tcodes()\r\n\t\t{\r\n\t\t\treturn this.content\r\n\t\t\t\t.split('\\n')\r\n\t\t\t\t.map(codeValue => codeValue.trim())\r\n\t\t\t\t.filter(codeValue =>  codeValue !== '');\r\n\t\t},\r\n\r\n\t},\r\n\r\n\tmounted()\r\n\t{\r\n\t\tthis.$refs.editor.addEventListener(\"paste\", function(e) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tvar text = '';\r\n\r\n\t\t\tif (typeof (e.originalEvent || e).clipboardData === 'undefined')\r\n\t\t\t{\r\n\t\t\t\ttext = window.clipboardData.getData('Text');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\ttext = (e.originalEvent || e).clipboardData.getData('text/plain');\r\n\t\t\t}\r\n\r\n\t\t\tif (document.queryCommandSupported('insertHTML'))\r\n\t\t\t{\r\n\t\t\t\ttext = text.replace(/\\r?\\n/g, '<br>');\r\n\t\t\t\tdocument.execCommand(\"insertHTML\", false, text);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdocument.execCommand(\"paste\", false, text);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$refs.editor.addEventListener('input', e => {\r\n\r\n\t\t\tif (e.target.textContent) \r\n\t\t\t{\r\n\t\t\t\te.target.dataset.divPlaceholderContent = 'true';\r\n\t\t\t}\r\n\t\t\telse \r\n\t\t\t{\r\n\t\t\t\tdelete(e.target.dataset.divPlaceholderContent);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\r\n\tmethods: {\r\n\r\n\t\thandleInput(e)\r\n\t\t{\r\n\t\t\tconst selection = document.getSelection();\r\n\t\t\tconst selNode = selection.anchorNode;\r\n\t\r\n\t\t\tif (selNode.nodeType == Node.TEXT_NODE && selNode.parentNode.tagName != 'CODE')\r\n\t\t\t{\r\n\t\t\t\tselNode.parentNode.setAttribute('class', '');\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.content = e.target.innerText;\r\n\t\t},\r\n\r\n\t\thandleBlur(e)\r\n\t\t{\r\n\t\t\tthis.check();\r\n\t\t},\r\n\r\n\t\tasync check()\r\n\t\t{\r\n\t\t\tconst newCodes = this.codes.filter(code => !this.checkedCodes.hasOwnProperty(code));\r\n\r\n\t\t\tif (newCodes.length > 0)\r\n\t\t\t{\r\n\t\t\t\tconst foundCodes = await checkExistsCodes({\r\n\t\t\t\t\tcodes: newCodes,\r\n\t\t\t\t\tsignedParameters: this.signedParameters\r\n\t\t\t\t});\r\n\r\n\t\t\t\tnewCodes.forEach((codeValue) => {\r\n\t\t\t\t\tthis.checkedCodes[codeValue] = foundCodes.includes(codeValue);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.updateDisplayContent();\r\n\t\t},\r\n\r\n\t\tupdateDisplayContent()\r\n\t\t{\r\n\t\t\tlet html = '';\r\n\r\n\t\t\tfor(let code of this.codes) \r\n\t\t\t{\r\n\t\t\t\tconst isFound = !!this.checkedCodes[code];\r\n\t\t\t\thtml += '<div class=\"' + (isFound ? 'text-success': 'text-danger') + '\">' + _escape(code) + ' ' + '</div>'\r\n\t\t\t}\r\n\r\n\t\t\tthis.displayContent = html;\r\n\t\t},\r\n\r\n\t\tremoveCodeFromContent(code)\r\n\t\t{\r\n\t\t\tthis.content = this.content\r\n\t\t\t\t.replace(new RegExp('^.*' + code + '.*$', 'mg'), '')\r\n\t\t\t\t.replace('\\n\\r?', '');\r\n\t\t},\r\n\r\n\t\tprepareData()\r\n\t\t{\r\n\t\t\tconst data = {};\r\n\r\n\t\t\tfor (let code of this.codes)\r\n\t\t\t{\r\n\t\t\t\tdata[code] = DEFAULT_ADDTOBASKET_QUANTITY;\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\tasync addtobasket()\r\n\t\t{\r\n\t\t\tif (!this.codes.length)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tKTApp.block(document.querySelector('.modal.show'));\r\n\r\n\t\t\tconst result = await addtobasket({\r\n\t\t\t\tdata: this.prepareData(),\r\n\t\t\t\tsignedParameters: this.signedParameters\r\n\t\t\t});\r\n\r\n\t\t\tfor (let i in result)\r\n\t\t\t{\r\n\t\t\t\tif (!result.hasOwnProperty(i))\r\n\t\t\t\t{\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (result[i].isSuccess)\r\n\t\t\t\t{\r\n\t\t\t\t\ttoastr.success(`${i}: ${result[i].message}`);\r\n\t\t\t\t\tthis.removeCodeFromContent(result[i].code);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\twindow.toastr.error(`${i}: ${result[i].message}`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tKTApp.unblock(document.querySelector('.modal.show'));\r\n\t\t\tthis.updateDisplayContent();\r\n\t\t\tthis.$store.dispatch('cart/fetch');\r\n\t\t}\r\n\t}\r\n} \r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\ncode[data-placeholder]:not(:focus):not([data-div-placeholder-content]):before {\r\n    content: attr(data-placeholder);\r\n    float: left;\r\n    margin-left: 2px;\r\n\tcolor: #a1a8c3;\r\n\twhite-space: pre;\r\n}\r\n</style>","import CodesImport from './CodesImport.vue';\r\n\r\nconst { store } = B2BPortal;\r\n\r\nexport class BasketCodesImport\r\n{\r\n\tconstructor(params)\r\n\t{\r\n\t\tthis._params = params;\r\n\t\tthis.el = params.el;\r\n\t\tthis.signedParameters = params.signedParameters;\r\n\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tinit()\r\n\t{\r\n\t\tconst signedParameters = this.signedParameters;\r\n\r\n\t\tthis.component = new Vue({\r\n\t\t\tel: this.el,\r\n\t\t\tcomponents: { CodesImport },\r\n\t\t\ttemplate: `<CodesImport :signedParameters=\"signedParameters\" />`,\r\n\t\t\tstore,\r\n\r\n\t\t\tdata()\r\n\t\t\t{\r\n\t\t\t\treturn { signedParameters }\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}"],"names":["action","actionName","data","resultData","undefined","Promise","resolve","reject","BX","ajax","runComponentAction","mode","then","result","global","toastr","error","errors","message","checkExistsCodes","addtobasket","onCustomEvent","basePropertyOf","object","key","_basePropertyOf","htmlEscapes","escapeHtmlChar","_escapeHtmlChar","freeGlobal","commonjsHelpers","Object","_freeGlobal","freeSelf","self","root","Function","_root","Symbol","_Symbol","arrayMap","array","iteratee","index","length","Array","_arrayMap","isArray","isArray_1","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","getRawTag","value","isOwn","call","tag","e","_getRawTag","objectToString","_objectToString","nullTag","undefinedTag","baseGetTag","_baseGetTag","isObjectLike","isObjectLike_1","symbolTag","isSymbol","isSymbol_1","INFINITY","symbolProto","symbolToString","baseToString","_baseToString","toString_1","reUnescapedHtml","reHasUnescapedHtml","RegExp","source","escape","string","test","replace","_escape","DEFAULT_ADDTOBASKET_QUANTITY","props","signedParameters","type","String","default","content","displayContent","checkedCodes","computed","messages","freeze","keys","filter","startsWith","reduce","obj","slice","codes","split","map","codeValue","trim","mounted","$refs","editor","addEventListener","preventDefault","text","originalEvent","clipboardData","window","getData","document","queryCommandSupported","execCommand","target","textContent","dataset","divPlaceholderContent","methods","handleInput","selection","getSelection","selNode","anchorNode","nodeType","Node","TEXT_NODE","parentNode","tagName","setAttribute","innerText","handleBlur","check","newCodes","code","foundCodes","forEach","includes","updateDisplayContent","html","isFound","removeCodeFromContent","prepareData","KTApp","block","querySelector","i","isSuccess","success","unblock","$store","dispatch","normalizeComponent","template","style","script","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","options","render","staticRenderFns","_compiled","functional","_scopeId","hook","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","renderWithStyleInjection","h","existing","beforeCreate","concat","normalizeComponent_1","isOldIE","navigator","userAgent","toLowerCase","id","addStyle","HEAD","styles","css","group","media","ids","Set","has","sources","btoa","unescape","encodeURIComponent","JSON","stringify","element","createElement","head","getElementsByTagName","appendChild","push","styleSheet","cssText","Boolean","join","size","textNode","createTextNode","nodes","childNodes","removeChild","insertBefore","browser","B2BPortal","store","BasketCodesImport","params","_params","el","init","component","Vue","components","CodesImport"],"mappings":"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"}