{"version":3,"file":"component.js","sources":["../src/component.js"],"sourcesContent":["export class SalePersonalProfileSelect\n{\n\n\tconstructor()\n\t{\n\t\tthis.initListeners()\n\t}\n\n\tinitListeners()\n\t{\n\t\tlet elements = document.querySelectorAll('.js-spps-select');\n\n\t\tif (elements)\n\t\t{\n\t\t\telements.forEach((link) => {\n\t\t\t\tlink.addEventListener('click', (e) => {\n\t\t\t\t\te.preventDefault()\n\t\t\t\t\tthis.setCurrentProfile(link.getAttribute('data-id'))\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}\n\n\tsetCurrentProfileAction(data)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t'redsign:b2bportal.sale.personal.profile.select',\n\t\t\t\t'setCurrentProfile',\n\t\t\t\t{ \n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: data,\n\t\t\t\t}\n\t\t\t).then(resolve, reject)\n\t\t})\n\t}\n\n\tasync setCurrentProfile(id = 0)\n\t{\n\t\ttry {\n\t\t\tKTApp.blockPage()\n\n\t\t\tlet data = {\n\t\t\t\tid: id,\n\t\t\t}\n\n\t\t\tlet result = await this.setCurrentProfileAction(data)\n\n\t\t\tif (result.data.result == true)\n\t\t\t{\n\t\t\t\tBX.reload()\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.data.ERRORS.forEach((errorMessage) => this.showError(errorMessage))\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tif (e.errors)\n\t\t\t{\n\t\t\t\te.errors.forEach((error) => this.showError(error.message))\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showError('Unknown error')\n\t\t\t}\n\n\t\t\tKTApp.unblockPage()\n\t\t}\n\t}\n\n\tshowError(message)\n\t{\n\t\twindow.toastr.error(\n\t\t\tmessage\n\t\t); \n\t}\n\n}\n"],"names":["SalePersonalProfileSelect","initListeners","elements","document","querySelectorAll","forEach","link","addEventListener","e","preventDefault","setCurrentProfile","getAttribute","data","Promise","resolve","reject","BX","ajax","runComponentAction","mode","then","id","KTApp","blockPage","setCurrentProfileAction","result","reload","ERRORS","errorMessage","showError","errors","error","message","unblockPage","window","toastr"],"mappings":";;;;;AAAA,KAAaA,yBAAyB;GAGrC,qCACA;KAAA;KACC,IAAI,CAACC,aAAa,EAAE;;GACpB;KAAA;KAAA,gCAGD;OAAA;OACC,IAAIC,QAAQ,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,iBAAiB,CAAC;OAE3D,IAAIF,QAAQ,EACZ;SACCA,QAAQ,CAACG,OAAO,CAAC,UAACC,IAAI,EAAK;WAC1BA,IAAI,CAACC,gBAAgB,CAAC,OAAO,EAAE,UAACC,CAAC,EAAK;aACrCA,CAAC,CAACC,cAAc,EAAE;aAClB,KAAI,CAACC,iBAAiB,CAACJ,IAAI,CAACK,YAAY,CAAC,SAAS,CAAC,CAAC;YACpD,CAAC;UACF,CAAC;;;;KAEH;KAAA,wCAEuBC,IAAI,EAC5B;OACC,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;SACvCC,EAAE,CAACC,IAAI,CAACC,kBAAkB,CACzB,gDAAgD,EAChD,mBAAmB,EACnB;WACCC,IAAI,EAAE,OAAO;WACbP,IAAI,EAAEA;UACN,CACD,CAACQ,IAAI,CAACN,OAAO,EAAEC,MAAM,CAAC;QACvB,CAAC;;;KACF;KAAA;OAAA;SAAA;SAAA;WAAA;WAAA;WAAA;SAAA;WAAA;aAAA;eAEuBM,EAAE,2DAAG,CAAC;eAAA;eAG5BC,KAAK,CAACC,SAAS,EAAE;eAEbX,IAAI,GAAG;iBACVS,EAAE,EAAEA;gBACJ;eAAA;eAAA,OAEkB,IAAI,CAACG,uBAAuB,CAACZ,IAAI,CAAC;aAAA;eAAjDa,MAAM;eAEV,IAAIA,MAAM,CAACb,IAAI,CAACa,MAAM,IAAI,IAAI,EAC9B;iBACCT,EAAE,CAACU,MAAM,EAAE;gBACX,MAED;iBACCD,MAAM,CAACb,IAAI,CAACe,MAAM,CAACtB,OAAO,CAAC,UAACuB,YAAY;mBAAA,OAAK,MAAI,CAACC,SAAS,CAACD,YAAY,CAAC;mBAAC;;eAC1E;eAAA;aAAA;eAAA;eAAA;eAID,IAAI,YAAEE,MAAM,EACZ;iBACC,YAAEA,MAAM,CAACzB,OAAO,CAAC,UAAC0B,KAAK;mBAAA,OAAK,MAAI,CAACF,SAAS,CAACE,KAAK,CAACC,OAAO,CAAC;mBAAC;gBAC1D,MAED;iBACC,IAAI,CAACH,SAAS,CAAC,eAAe,CAAC;;eAGhCP,KAAK,CAACW,WAAW,EAAE;aAAA;aAAA;eAAA;;;;OAAA;SAAA;;OAAA;;;KAAA;KAAA,0BAIXD,OAAO,EACjB;OACCE,MAAM,CAACC,MAAM,CAACJ,KAAK,CAClBC,OAAO,CACP;;;GACD;CAAA;;;;;;;;"}